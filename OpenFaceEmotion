---
title: "OpenFaceEmotion"
author: "Julianna Calabrese"
date: "12/12/2018"
output: html_document
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
#install.packages("mosaic")
#install.packages("ggplot2")
#install.packages("tidyr")
#install.packages("dplyr")
#install.packages("psych")
#install.packages("nlme")
#install.packages("plyr")
#install.packages("Hmisc")
#install.packages("rmarkdown")
#install.packages("shiny")
#install.packages("yaml")
#install.packages("rapportools")
#install.packages("lavaan")
#install.packages("lme4")

library(mosaic)
library(ggplot2)
library(tidyr)
library(dplyr)
library(psych)
library(nlme)
library(plyr)
library(Hmisc)
library(rmarkdown)
library(shiny)
library(yaml)
library(rapportools)
library(lavaan)
library(lme4)
```

## Outline/Description

This is the file where I'll turn cp_full (generated by OpenFacePrep) into a more condensed dataset. I don't want to use every single AU, because that's a lot of AUs and we can't build a model that involves every AU!

First, you need to do a nice lit review and how other papers coherently smush a lot of individual AUs together. Most likely you'll take an EMFACs-like approach and just calculate emotional intensity based on AU intensit for four emotions: anger, fear, happiness, and sadness. You also want to create one more not-technically-a-emotion: pain.

The generated .csv file should just include six variables: id, anger, fear, happiness, sadness, and pain (although pain isn't technically an emotion). Or maybe it can just add those six variables to cp_full.csv. 

## Load in data

```{r}
cp_full <- read.csv(file="C:/Users/jrcala/Documents/My Research/RStudio/cp_full.csv", header=TRUE, sep=",")
#cp_full <- read.csv(file="/Users/Julianna/Desktop/data/cp_full.csv", header=TRUE, sep=",")
cp_full$X <- NULL
```

## Pain

This is a formula from Lucey et al. 2011 (one of Cohn's IEEE papers) that uses AUs to calculate painful expressions. It is called the Prkachin and Solomon pain scale:
Pain = AU4 + (AU6||AU7) + (AU9||AU10) + AU43

However, since we don't have data on AU43, we're just going to go with this formula. This will result in a 15-point scale:
Pain = AU4 + (AU6||AU7) + (AU9||AU10)

